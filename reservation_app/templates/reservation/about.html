{% extends "base.html" %}
{% load crispy_forms_tags %}

{% block content %}
<div class="container mt-4">

  <!-- Feedback Form Section -->
  <div class="row justify-content-center">
    <div class="col-md-8">
      <h3 class="text-center">Leave Feedback</h3>
      <form method="post">
        {% csrf_token %}
        {{ feedback_form|crispy }}
        <button type="submit" name="feedback_submit" class="btn btn-secondary mt-2">Submit Feedback</button>
      </form>
    </div>
  </div>

  <!-- Feedback List Section -->
  <div class="row justify-content-center mt-4">
    <div class="col-md-8">
      <h4 class="text-center">Recent Feedback</h4>
      <ul class="list-group mt-3">
        {% for feedback in feedbacks %}
        <li class="list-group-item">
          <strong>
            {% if feedback.patron %}
              {{ feedback.patron.username }}
            {% else %}
              Guest
            {% endif %}
          </strong>: {{ feedback.content }}<br>
          <small class="text-muted">{{ feedback.created_on|date:"M d, Y H:i" }}</small>
        </li>
        {% empty %}
        <li class="list-group-item">No feedback submitted yet.</li>
        {% endfor %}
      </ul>
    </div>
  </div>

  <!-- Map Section with Address Overlay -->
  <div class="row justify-content-center mt-4">
    <div class="col-md-10">
      <h4 class="maph3 text-center my-4">Visit us ‚Äì Our Abu Dhabi Location</h4>
      <div class="map-wrapper" style="position: relative; width: 100%; max-width: 100%; height: 350px;">
        <iframe
          src="https://www.google.com/maps?q=24.486371,54.368478&z=17&output=embed"
          width="100%"
          height="100%"
          style="border: 0"
          allowfullscreen=""
          loading="lazy"
          referrerpolicy="no-referrer-when-downgrade">
        </iframe>
        <div style="
          position: absolute;
          bottom: 15px;
          left: 15px;
          background-color: rgba(0, 0, 0, 0.6);
          color: #fff;
          padding: 12px 18px;
          border-radius: 8px;
          font-size: 1rem;
          max-width: 90%;
          box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        ">
          üìç <strong>Arzanah Tower ‚Äì Umm Suqeim Street</strong><br>
          Al Zahiya, Abu Dhabi, United Arab Emirates
        </div>
      </div>
    </div>
  </div>

</div>
{% endblock %}
